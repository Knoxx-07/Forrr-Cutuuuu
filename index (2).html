<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rose Blossom ‚Äî Click to Reveal üíù</title>
<style>
  /* üåπ your original CSS (unchanged) */
  :root{
    --bg1: #0f1724;
    --bg2: #2b1630;
    --card: rgba(255,255,255,0.06);
    --accent: #ff4d79;
    --glass: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    background: radial-gradient(1200px 800px at 10% 10%, #2b0f2b 0%, transparent 10%),
                radial-gradient(900px 600px at 90% 90%, #10263b 0%, transparent 15%),
                linear-gradient(180deg,var(--bg1), var(--bg2));
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px;
  }

  .stage{
    width:100%;
    max-width:1100px;
    min-height:560px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:18px;
    padding:40px;
    position:relative;
    overflow:hidden;
    box-shadow: 0 10px 40px rgba(3,6,23,0.6);
    backdrop-filter: blur(6px) saturate(1.2);
    border: 1px solid rgba(255,255,255,0.03);
  }

  header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
  h1{font-size:clamp(20px,3.4vw,34px);letter-spacing:0.6px;margin:0}
  p.lead{opacity:0.85;margin:0;font-size:14px}

  .canvas{
    height:420px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
  }

  .rose-wrap{
    width:280px;
    height:380px;
    display:flex;
    align-items:flex-end;
    justify-content:center;
    position:relative;
    cursor:pointer;
  }

  .stem{
    width:6px;
    height:220px;
    background: linear-gradient(180deg,#0b6b2e,#06502a);
    border-radius:4px;
    position:relative;
    box-shadow: 0 6px 12px rgba(2,20,8,0.6) inset;
    transform-origin: bottom center;
    animation: sway 4s ease-in-out infinite;
  }
  @keyframes sway{
    0%{transform: rotate(-2deg)}
    50%{transform: rotate(2deg)}
    100%{transform: rotate(-2deg)}
  }

  .leaf{
    width:80px;height:36px;background: linear-gradient(180deg,#134d2f,#0b6b2e);
    position:absolute;border-radius:30px 60px 60px 30px;transform-origin: left center;box-shadow:0 8px 18px rgba(0,0,0,0.5);
  }
  .leaf.left{left:48%;bottom:110px;transform: rotate(-32deg);}
  .leaf.right{left:22%;bottom:95px;transform: rotate(18deg);}

  .bud{
    width:120px;height:120px;position:absolute;bottom:220px;left:50%;transform:translateX(-50%);
    display:grid;place-items:center;pointer-events:none;
    transform-origin:center center;
  }

  .petal{
    position:absolute;width:76px;height:90px;border-radius:60% 60% 50% 50% / 70% 70% 30% 30%;
    background: radial-gradient(circle at 35% 20%, #ff7a9a 0%, #e11b52 40%, #8b042b 100%);
    box-shadow: 0 8px 18px rgba(139,4,43,0.55), 0 2px 6px rgba(0,0,0,0.35);
    transform-origin: bottom center;opacity:0;filter: drop-shadow(0 10px 30px rgba(0,0,0,0.55));
  }
  .petal.p1{transform: rotate(0deg) translateY(20px) scale(0.6); left:50%; top:10%;}
  .petal.p2{transform: rotate(50deg) translateY(20px) scale(0.6); left:50%; top:10%;}
  .petal.p3{transform: rotate(100deg) translateY(20px) scale(0.6); left:50%; top:10%;}
  .petal.p4{transform: rotate(150deg) translateY(20px) scale(0.6); left:50%; top:10%;}
  .petal.p5{transform: rotate(200deg) translateY(20px) scale(0.6); left:50%; top:10%;}
  .petal.p6{transform: rotate(250deg) translateY(20px) scale(0.6); left:50%; top:10%;}

  .core{
    width:48px;height:48px;border-radius:50%;background: radial-gradient(circle at 35% 30%, #ffd0df 0%, #ff2a6d 50%, #8b042b 100%);
    transform: scale(0.2);opacity:0;box-shadow:0 6px 22px rgba(203,20,80,0.5);
  }

  .rose-wrap.bloom .petal{animation:petal-in 1100ms cubic-bezier(.2,.9,.2,1) forwards}
  .rose-wrap.bloom .petal.p1{animation-delay:130ms}
  .rose-wrap.bloom .petal.p2{animation-delay:200ms}
  .rose-wrap.bloom .petal.p3{animation-delay:270ms}
  .rose-wrap.bloom .petal.p4{animation-delay:340ms}
  .rose-wrap.bloom .petal.p5{animation-delay:410ms}
  .rose-wrap.bloom .petal.p6{animation-delay:480ms}
  .rose-wrap.bloom .core{animation:core-in 800ms 600ms cubic-bezier(.2,.9,.2,1) forwards}

  @keyframes petal-in{
    0%{opacity:0;transform: translateY(30px) scale(0.6) rotate(var(--r,0deg));}
    70%{opacity:1;transform: translateY(-6px) scale(1.08) rotate(var(--r,0deg));}
    100%{opacity:1;transform: translateY(0) scale(1) rotate(var(--r,0deg));}
  }
  @keyframes core-in{
    0%{opacity:0;transform: scale(0.2)}
    60%{opacity:1;transform: scale(1.08)}
    100%{opacity:1;transform: scale(1)}
  }

  .sparkle{position:absolute;width:8px;height:8px;border-radius:50%;background:linear-gradient(180deg,#fff,#ffd7e6);opacity:0;filter:blur(0.6px)}
  .sparkle.s1{left:56%;bottom:340px;animation:spk 2.8s infinite}
  .sparkle.s2{left:46%;bottom:300px;animation:spk 3.4s 0.6s infinite}
  .sparkle.s3{left:62%;bottom:300px;animation:spk 2.2s 0.2s infinite}
  @keyframes spk{0%{transform:scale(0.6) translateY(0);opacity:0}10%{opacity:1;transform:scale(1.2) translateY(-8px)}70%{opacity:0.6;transform:scale(0.9) translateY(-18px)}100%{opacity:0;transform:scale(0.3) translateY(-30px)}}

  .hearts{
    position:absolute;left:0;right:0;top:0;bottom:0;pointer-events:none;overflow:hidden;
  }
  .heart{
    position:absolute;width:26px;height:26px;transform:translateY(-20px) rotate(0deg) scale(0.75);
    transform-origin:center;animation:fall 3500ms linear forwards;opacity:0.95;will-change:transform,opacity;
    background: radial-gradient(circle at 30% 30%, #fff1f6 0%, #ff5a86 40%, #9b052f 100%);
    clip-path: polygon(50% 20%, 61% 13%, 72% 24%, 80% 30%, 85% 40%, 85% 52%, 50% 88%, 15% 52%, 15% 40%, 20% 30%, 28% 24%, 39% 13%);
    filter: drop-shadow(0 8px 18px rgba(139,4,43,0.35));
  }
  @keyframes fall{
    0%{transform: translateY(-40px) rotate(0deg) scale(0.75);opacity:1}
    100%{transform: translateY(520px) rotate(360deg) scale(1);opacity:0}
  }

  .msg-box{
    position:absolute;right:36px;top:36px;max-width:360px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    transform: translateY(-10px) scale(0.98);opacity:0;pointer-events:auto;backdrop-filter: blur(6px);
    transition: all 360ms cubic-bezier(.2,.9,.2,1);
  }
  .msg-box.show{opacity:1;transform:translateY(0) scale(1)}
  .msg-box h3{margin:0 0 8px 0;font-size:16px}
  .msg-box p{margin:0;color:rgba(255,255,255,0.9);line-height:1.4}
  .btn{
    display:inline-block;padding:8px 14px;border-radius:999px;border:none;background:linear-gradient(90deg,#ff6a94,#ff2b6b);color:white;font-weight:600;cursor:pointer;margin-top:12px;box-shadow:0 8px 20px rgba(255,43,107,0.14);
  }

  .tip{position:absolute;left:36px;top:36px;opacity:0.9;font-size:13px}

  @media (max-width:720px){
    .stage{padding:20px}
    .msg-box{right:20px;top:auto;bottom:18px;left:18px;max-width:unset}
    .rose-wrap{width:200px}
  }

  /* üå∏ Added glow effect */
  .rose-wrap.bloom::after {
    content: "";
    position: absolute;
    width: 220px; height: 220px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,75,130,0.5), transparent 70%);
    bottom: 200px; left: 50%;
    transform: translateX(-50%);
    animation: glow 2s infinite alternate;
    pointer-events:none;
  }
  @keyframes glow {
    from { opacity: 0.3; transform: translateX(-50%) scale(1); }
    to { opacity: 0.9; transform: translateX(-50%) scale(1.15); }
  }

</style>
</head>
<body>
  <div class="stage" role="main">
    <header>
      <div>
        <h1>Forrr Ashuuuu... üíñ</h1>
        <p class="lead">Click the rose to make it blossom ‚Äî hearts will fall and a message box will appear.</p>
      </div>
    </header>

    <div class="canvas" aria-hidden="false">
      <div class="rose-wrap" id="rose" aria-label="Clickable rose ‚Äî click to blossom" title="Click to blossom">
        <div class="stem"></div>
        <div class="leaf left" aria-hidden></div>
        <div class="leaf right" aria-hidden></div>

        <div class="bud" id="bud">
          <div class="petal p1" style="--r:0deg"></div>
          <div class="petal p2" style="--r:50deg"></div>
          <div class="petal p3" style="--r:100deg"></div>
          <div class="petal p4" style="--r:150deg"></div>
          <div class="petal p5" style="--r:200deg"></div>
          <div class="petal p6" style="--r:250deg"></div>
          <div class="core"></div>
        </div>

        <div class="sparkle s1"></div>
        <div class="sparkle s2"></div>
        <div class="sparkle s3"></div>
      </div>

      <div class="hearts" id="hearts"></div>

      <div class="msg-box" id="msgBox" role="dialog" aria-hidden="true">
        <h3 id="msgTitle">A little message</h3>
        <p id="msgText"></p>
        <button class="btn" id="closeBtn">Close</button>
        <button class="btn" id="downloadBtn">Download üåπ</button>
      </div>

      <div class="tip"></div>
    </div>
  </div>

  <!-- üéµ Background Music -->
  <audio id="bgMusic" src="01 - Celine Dion - My Heart Will Go On.mp3" preload="auto" loop></audio>

  <!-- üì∏ html2canvas for download -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
  const rose = document.getElementById('rose');
  const heartsContainer = document.getElementById('hearts');
  const msgBox = document.getElementById('msgBox');
  const msgText = document.getElementById('msgText');
  const closeBtn = document.getElementById('closeBtn');
  const bgMusic = document.getElementById('bgMusic');
  const downloadBtn = document.getElementById('downloadBtn');
  let isBloomed = false;
  let heartInterval = null;

  function bloom(){
    if(!isBloomed){
      rose.classList.add('bloom');
      msgBox.classList.add('show');
      msgBox.setAttribute('aria-hidden','false');
      typeMessage("Just like a rose, You carries beauty in your petals and strength in your thorns. üåπ‚ú®");
      startHearts();
      bgMusic.play(); // üéµ starts music
    } else {
      rose.classList.remove('bloom');
      msgBox.classList.remove('show');
      msgBox.setAttribute('aria-hidden','true');
      stopHearts();
      bgMusic.pause(); // üéµ stop music
    }
    isBloomed = !isBloomed;
  }

  function typeMessage(text){
    msgText.textContent = '';
    let i = 0;
    const speed = 28;
    function step(){
      if(i < text.length){
        msgText.textContent += text.charAt(i);
        i++;
        requestAnimationFrame(()=>setTimeout(step,speed));
      }
    }
    step();
  }

  function createHeart(){
    const h = document.createElement('div');
    h.className = 'heart';
    const size = 14 + Math.random()*20;
    h.style.width = size + 'px';
    h.style.height = size + 'px';
    const x = Math.random()*100;
    h.style.left = x + '%';
    const dur = 2800 + Math.random()*2000;
    h.style.animationDuration = dur + 'ms';
    h.style.transform = `translateY(-20px) rotate(${Math.random()*180}deg)`;
    heartsContainer.appendChild(h);
    setTimeout(()=>{ if(h && h.parentNode) h.parentNode.removeChild(h); }, dur + 60);
  }

  function startHearts(){
    if(heartInterval) clearInterval(heartInterval);
    for(let i=0;i<6;i++) setTimeout(createHeart, i*120);
    heartInterval = setInterval(()=>{
      const count = 1 + Math.floor(Math.random()*3);
      for(let i=0;i<count;i++) setTimeout(createHeart, i*70);
    }, 600);
  }
  function stopHearts(){
    if(heartInterval) { clearInterval(heartInterval); heartInterval = null; }
    setTimeout(()=>{ heartsContainer.innerHTML = ''; }, 800);
  }

  rose.addEventListener('click', bloom);
  closeBtn.addEventListener('click', ()=>{ if(isBloomed) bloom(); });

  // ‚ú® Click anywhere = spawn hearts
  document.body.addEventListener('click', (e)=>{
    for(let i=0;i<3;i++) setTimeout(createHeart, i*100);
  });

  // üì∏ Download button
  downloadBtn.addEventListener('click', ()=>{
    html2canvas(document.querySelector('.stage')).then(canvas=>{
      const link = document.createElement('a');
      link.download = 'rose-blossom.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  });
</script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body>
</html>
